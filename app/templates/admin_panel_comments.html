{% extends 'layout.html' %} {% block head %}
<title>{{translations.admin_panel_comments.title}}</title>
{% endblock head %} {% block body %}

<div class="container mx-auto px-4 max-w-3xl">
    <h1 class="text-3xl font-bold text-center mt-8 mb-6">
        {{translations.admin_panel_comments.comments}}
    </h1>

    <div class="space-y-4">
        {% for comment in comments %}
        <div class="card bg-base-200 shadow">
            <div class="card-body p-4">
                <div class="flex items-center justify-between mb-2">
                    <div class="flex items-center gap-2 text-sm">
                        <i class="ti ti-id"></i>
                        <span class="text-base-content/70">{{translations.admin_panel_comments.post_id}}:</span>
                        <a href="/post/{{ url_id(comment[1]) }}" class="link link-primary font-medium">
                            {{ url_id(comment[1]) }}
                        </a>
                    </div>
                </div>

                <p class="text-base-content/80 py-2">{{ comment[2] | e }}</p>

                <div class="flex flex-wrap justify-between items-center text-sm text-base-content/60 mt-2">
                    <div class="flex items-center gap-4">
                        <span class="flex items-center gap-1">
                            <i class="ti ti-clock"></i>
                            <span class="hidden md:inline">{{translations.admin_panel_comments.creation_time}}:</span>
                            <span class="time font-medium">{{ comment[4] }}</span>
                        </span>
                        <span class="flex items-center gap-1">
                            <i class="ti ti-calendar"></i>
                            <span class="hidden md:inline">{{translations.admin_panel_comments.creation_date}}:</span>
                            <span class="date font-medium">{{ comment[4] }}</span>
                        </span>
                    </div>
                </div>

                {% if request.path == "/admin/comments" %}
                <div class="flex justify-between items-center mt-4 pt-2 border-t border-base-300">
                    <div class="flex items-center gap-2">
                        <i class="ti ti-user"></i>
                        <span class="text-base-content/70">{{translations.admin_panel_comments.author}}:</span>
                        <a href="/user/{{ comment[3].lower() }}" class="link link-primary font-medium">
                            {{ comment[3] }}
                        </a>
                    </div>

                    <form method="post">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                        <input type="hidden" name="comment_id" value="{{ comment[0] }}" />
                        <button type="submit" name="comment_delete_button" class="btn btn-ghost btn-sm text-error">
                            <i class="ti ti-trash-x text-lg"></i>
                        </button>
                    </form>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>

    {% if request.path == "/admin/comments" %}
    {% from "components/pagination.html" import pagination %}
    {{ pagination(page, total_pages, request.path) }}

    <div class="fixed bottom-4 left-4">
        <a href="/admin" class="btn btn-circle btn-ghost text-base-content hover:text-primary">
            <i class="ti ti-arrow-back text-xl"></i>
        </a>
    </div>
    {% endif %}
</div>
{% endblock body %}
