{% extends 'layout.html' %} {% block head %}
<title>{{translations.search.title}}: {{ query }}</title>
{% endblock head %} {% block body %}

<div class="container mx-auto px-4">
    <h1 class="text-2xl font-bold text-center mt-8 mb-6">
        {{translations.search.results}}: "{{ query }}"
    </h1>

    {% if users %}
    <section class="mb-8">
        <h2 class="text-2xl font-bold text-primary text-center mb-6">
            {{translations.search.users}}
        </h2>
        <div class="flex flex-wrap justify-center gap-4">
            {% for user in users %}
                {% for user_data in user %}
                <div class="card card-side bg-base-200 shadow-md">
                    <figure class="pl-4">
                        <div class="avatar">
                            <div class="w-16 rounded">
                                <img src="{{ user_data[4] }}" alt="{{ user_data[1] }}" />
                            </div>
                        </div>
                    </figure>
                    <div class="card-body">
                        <a href="/user/{{ user_data[1]|lower }}" class="card-title link link-primary">
                            {{ user_data[1] }}
                        </a>
                    </div>
                </div>
                {% endfor %}
            {% endfor %}
        </div>
    </section>
    {% endif %}

    {% if posts %}
    <section>
        <h2 class="text-2xl font-bold text-primary text-center mb-6">
            {{translations.search.posts}}
        </h2>
        <div class="flex flex-wrap justify-center gap-6 max-w-7xl mx-auto">
            {% from "components/post_card_macro.html" import post_card with context %}
            {% for post in posts %}
                {% for post_data in post %}
                    {{ post_card(post=post_data, author_profile_picture=get_profile_picture(post_data[5])) }}
                {% endfor %}
            {% endfor %}
        </div>
        {% from "components/pagination.html" import pagination %}
        {{ pagination(page, total_pages, request.path) }}
    </section>
    {% endif %}

    {% if empty %}
    <div class="alert alert-warning max-w-md mx-auto mt-8">
        <i class="ti ti-search-off text-xl"></i>
        <span>{{translations.search.no_results}}</span>
    </div>
    {% endif %}
</div>
{% endblock body %}
